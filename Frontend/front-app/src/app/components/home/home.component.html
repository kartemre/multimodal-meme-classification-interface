<div class="home-container">
  <!-- Loading State -->
  <div class="loading-container" *ngIf="isLoading">
    <mat-spinner diameter="40"></mat-spinner>
    <p>Gönderiler yükleniyor...</p>
  </div>

  <!-- Error State -->
  <div class="error-container" *ngIf="error">
    <p class="error-message">{{ error }}</p>
    <button mat-raised-button color="primary" (click)="loadPosts()">Tekrar Dene</button>
  </div>

  <!-- Posts List -->
  <div class="posts-container" *ngIf="!isLoading && !error">
    <mat-card class="post-card" *ngFor="let post of posts">
      <!-- Post Header -->
      <mat-card-header>
        <mat-icon mat-card-avatar>account_circle</mat-icon>
        <mat-card-title>{{ post.userName }}</mat-card-title>
        <mat-card-subtitle>{{ formatDate(post.createdAt) }}</mat-card-subtitle>
        <button mat-icon-button class="more-options" [matMenuTriggerFor]="menu">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item>
            <mat-icon>report</mat-icon>
            <span>Bildir</span>
          </button>
        </mat-menu>
      </mat-card-header>

      <!-- Post Content -->
      <mat-card-content>
        <p class="post-text">{{ post.text }}</p>
        <img *ngIf="post.imageBase64" 
             [src]="post.imageBase64" 
             [alt]="post.text"
             class="post-image"
             (click)="$event.stopPropagation()">
      </mat-card-content>

      <!-- Post Actions -->
      <mat-card-actions>
        <button mat-button (click)="toggleLike(post)" [color]="post.isLiked ? 'accent' : ''">
          <mat-icon>{{ post.isLiked ? 'favorite' : 'favorite_border' }}</mat-icon>
          <span>{{ post.likes || 0 }}</span>
        </button>
        <button mat-button>
          <mat-icon>comment</mat-icon>
          <span>{{ post.comments || 0 }}</span>
        </button>
        <button mat-button>
          <mat-icon>share</mat-icon>
        </button>
      </mat-card-actions>
    </mat-card>

    <!-- No Posts Message -->
    <div class="no-posts" *ngIf="posts.length === 0">
      <mat-icon>post_add</mat-icon>
      <p>Henüz hiç gönderi yok.</p>
      <button mat-raised-button color="primary" routerLink="/create-post">
        İlk Gönderiyi Oluştur
      </button>
    </div>
  </div>
</div>
  